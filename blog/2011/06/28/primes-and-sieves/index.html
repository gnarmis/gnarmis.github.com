
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Primes and Sieves - Kilotau</title>
  <meta name="author" content="Gursimran Singh">

  
  <meta name="description" content="Project Euler is one of the best things I have discovered in a while.
It&#8217;s simply a huge open list of problems in numeric order that you can &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://gnarmis.github.com/blog/2011/06/28/primes-and-sieves/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Kilotau" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-27751478-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <!-- <header role="banner"></header> -->
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:gnarmis.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/"><i><b>Kilotau</b></i></a></li>
  <li><a href="/blog/categories/projects">Projects</a></li> 
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/categories/">Categories</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Primes and Sieves</h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-06-28T00:39:00-05:00" pubdate data-updated="true">Jun 28<span>th</span>, 2011</time>
        
      </p>
    
  </header>


<div class="entry-content"><p><a href="http://projecteuler.net/">Project Euler</a> is one of the best things I have discovered in a while.
It&#8217;s simply a huge open list of problems in numeric order that you can solve
using any math or code you want, provided that any code you write runs under
one minute.</p>

<p>The problems get interesting from the very start and are actually entertaining!
After reading <a href="https://www.facebook.com/l.php?u=http%3A%2F%2Fwww.maa.org%2Fdevlin%2FLockhartsLament.pdf&amp;h=dba0d">Lokhart&#8217;s Lament</a>, I&#8217;d say these problems would definitely
fit the category of challenging and yet stimulating. Math truly is an art,
and code is a cool way to access a subset of it.</p>

<p> </p>

<p>Anyway, primes! Here&#8217;s the problem itself:</p>

<p>The prime factors of 13195 are 5, 7, 13 and 29.</p>

<p>What is the largest prime factor of the number 600851475143 ?</p>

<p>And here&#8217;s my solution (skip if you want to try this yourself!):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">maxPrimeFactor</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="c1">#=&gt; maxPrimeFactor(600851475143) =&gt; 6857 in 2007.562 ms</span>
</span><span class='line'>  <span class="c1"># limit the ridiculous range safely</span>
</span><span class='line'>  <span class="n">range</span> <span class="o">=</span> <span class="n">n</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="no">Math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">to_s</span><span class="o">.</span><span class="n">length</span><span class="p">)</span><span class="o">.</span><span class="n">floor</span><span class="o">.</span><span class="n">to_f</span><span class="p">)</span>
</span><span class='line'>  <span class="n">ary</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.range</span><span class="p">)</span><span class="o">.</span><span class="n">to_a</span>
</span><span class='line'>  <span class="c1"># Sieve of Eratosthenes (replace with Sieve of Atkin?)</span>
</span><span class='line'>  <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">ary</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">j</span> <span class="k">in</span> <span class="n">ary</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">j</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">j</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>          <span class="n">ary</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>  <span class="c1">#remove non-factor primes</span>
</span><span class='line'>  <span class="n">ary</span><span class="o">.</span><span class="n">delete_if</span><span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="o">|</span> <span class="p">(</span> <span class="n">n</span> <span class="o">%</span> <span class="n">k</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)}</span>
</span><span class='line'>  <span class="n">ary</span><span class="o">.</span><span class="n">max</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>The code should be pretty much clear, at least except for that initial part
where I restrict the range. It was hard getting my super-easy-to-write-yet-inefficient
prime numbered array generator to solve for 600851475143 quickly. I was too
lazy to try to implement Sieve of Atkin so I just decided to try limiting the
range as much as I could. Apparently, if you take the root of the number of
digits in the given composite number, and then raise the upper limit of your
range to the inverse of that number, you get a much more limited range that
still gives you the right highest prime factor of the original number. I tried
this out down to two-digit composites and it seems to work.</p>

<p>Also, if I tried using a quick prime test on each element and deleting non-primes
that way (instead of a sieve), the performance was actually worse somehow.
And while trying to do this exact thing, I discovered a freaking <a href="http://www.noulakaz.net/weblog/2007/03/18/a-regular-expression-to-check-for-prime-numbers/">regular expression
that detects primes</a>! Yeah.</p>

<p>I literally spent close to three hours just researching a number of tangential
topics, such as <a href="http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes">Sieve of Eratothenes</a>, <a href="http://en.wikipedia.org/wiki/Sieve_of_Atkin">Sieve of Atkin</a>, <a href="http://en.wikipedia.org/wiki/Sieve_theory">Sieve theory</a>,
<a href="http://en.wikipedia.org/wiki/GNFS">GNFS</a>, and <a href="http://en.wikipedia.org/wiki/RSA">RSA</a>. While the problem itself wasn&#8217;t too challenging (I
ended up learning much more about Ruby, though), the whole experience was amazing.
And of course, there&#8217;s a lot of room for gains in efficiency too.</p>

<p>I highly recommend you sign up for an account on <a href="http://projecteuler.net/">Project Euler</a> and work
your way through some of those problems! It&#8217;s a great way to try out new languages,
learn more efficient techniques, or just have some fun. No, really, it&#8217;s actually
fun.</p>

<p> </p>

<p> </p>

<p> </p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Gursimran Singh</span></span>

      








  


<time datetime="2011-06-28T00:39:00-05:00" pubdate data-updated="true">Jun 28<span>th</span>, 2011</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/euler/'>euler</a>, <a class='category' href='/blog/categories/ruby/'>ruby</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://gnarmis.github.com/blog/2011/06/28/primes-and-sieves/" data-via="gnarmis" data-counturl="http://gnarmis.github.com/blog/2011/06/28/primes-and-sieves/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2011/06/21/template-for-deploying-static-sites-on-heroku/" title="Previous Post: staticRack: Template for Deploying Static Sites on Heroku">&laquo; staticRack: Template for Deploying Static Sites on Heroku</a>
      
      
        <a class="basic-alignment right" href="/blog/2011/07/06/cozy-a-database-less-restful-layer/" title="Next Post: Cozy: a Database-less RESTful Layer">Cozy: a Database-less RESTful Layer &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h2><i>a blog about the joys of programming</i></h2>
</section><section>
  <h1>About Me</h1>
  <p>Hi, I'm Gursimran Singh (<a href="http://twitter.com/gnarmis">@gnarmis</a>). I'm a Northwestern student, programmer, and sci-fi fan, and I have an interest in startup culture.</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/01/11/colby-small-wrapper-and-functions-for-persistent/">Colby: Small Wrapper and Functions for Persistent, Immutable Data Structures</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/05/project-euler-problem-3-using-clojure-1-dot-5-and-a-lazy-technique/">Project Euler Problem 3 using Clojure 1.5 and a lazy technique</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/18/repomap-track-your-local-git-repositories/">RepoMap: track your local git repositories</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/08/twitter-spam-machine-learning/">Ready Spam Detection in Twitter - Extended Abstract</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/18/hack-northwestern-updates/">Hack Northwestern updates</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Category Cloud</h1>
  <span id="tag-cloud"><a href='/blog/categories/bash' style='font-size: 104.0%'>bash(1)</a> <a href='/blog/categories/clojure' style='font-size: 128.0%'>clojure(7)</a> <a href='/blog/categories/coffeescript' style='font-size: 104.0%'>coffeescript(1)</a> <a href='/blog/categories/devops' style='font-size: 108.0%'>devops(2)</a> <a href='/blog/categories/euler' style='font-size: 108.0%'>euler(2)</a> <a href='/blog/categories/hackathon' style='font-size: 104.0%'>hackathon(1)</a> <a href='/blog/categories/hacknu' style='font-size: 108.0%'>hacknu(2)</a> <a href='/blog/categories/html5' style='font-size: 104.0%'>html5(1)</a> <a href='/blog/categories/javascript' style='font-size: 104.0%'>javascript(1)</a> <a href='/blog/categories/mobile' style='font-size: 104.0%'>mobile(1)</a> <a href='/blog/categories/productivity' style='font-size: 104.0%'>productivity(1)</a> <a href='/blog/categories/projects' style='font-size: 160.0%'>projects(15)</a> <a href='/blog/categories/quotes' style='font-size: 104.0%'>quotes(1)</a> <a href='/blog/categories/ruby' style='font-size: 140.0%'>ruby(10)</a> <a href='/blog/categories/sass' style='font-size: 104.0%'>sass(1)</a> <a href='/blog/categories/snippets' style='font-size: 108.0%'>snippets(2)</a> <a href='/blog/categories/talks' style='font-size: 104.0%'>talks(1)</a> <a href='/blog/categories/updates' style='font-size: 108.0%'>updates(2)</a> <a href='/blog/categories/webdev' style='font-size: 128.0%'>webdev(7)</a> </span>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("gnarmis", 10, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/gnarmis" class="twitter-follow-button" data-show-count="false">Follow @gnarmis</a>
  
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo" style="margin-bottom:0;"><p>
  Copyright &copy; 2013 - Gursimran Singh -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
